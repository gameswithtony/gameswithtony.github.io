<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <link rel="shortcut icon" href="images/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>Eliza - Brass: Birmingham Solo Mode</title>
</head>
<body>
    <main id="eliza">
        <section v-if="!gameHasStarted" class="playerArea">
            <h1 class="starttitle text-centered">
                Eliza
            </h1>
            <h2 class="startsubtitle text-centered">
                Brass: Birmingham Solo Mode
            </h2>
            <p class="startmessage">
                Select your player color
            </p>
            <ul class="player-color-options text-centered">
                <!--
                <li class="player-color-option gray" v-on:click="setPlayerColor(0)"
                    v-bind:class="{ playerColorOptionSelected: humanPlayer.color === 0 }">G</li>
                -->
                <li class="player-color-option blue" v-on:click="setPlayerColor(1)"
                    v-bind:class="{ playerColorOptionSelected: humanPlayer.color === 1 }">Blue</li>
                
                <li class="player-color-option red" v-on:click="setPlayerColor(2)"
                    v-bind:class="{ playerColorOptionSelected: humanPlayer.color === 2 }">Red</li>
                <!--
                <li class="player-color-option yellow" v-on:click="setPlayerColor(3)"
                    v-bind:class="{ playerColorOptionSelected: humanPlayer.color === 3 }">Y</li>
                    -->
            </ul>
            <ul class="player-color-options playerColorOptionTrack numberOfPlayers text-centered">
                <li class="player-color-option"><input type="radio" name="numberOfPlayers" id="2" value="2" v-model="numberOfPlayers" /> <label for="2">2-player</label></li>
                <li class="player-color-option"><input type="radio" name="numberOfPlayers" id="3" value="3" v-model="numberOfPlayers" /> <label for="3">3-player</label></li>
            </ul>
            <div class="text-centered">
                Eliza Deck Type:
                <select v-model="eliza.deckType">
                    <option value="0">Balanced</option>
                </select>
            </div>
            <div class="text-centered" v-if="numberOfPlayers === '3'">
                Eleanor Deck Type:
                <select v-model="eleanor.deckType">
                    <option value="0">Balanced</option>
                </select>
            </div>
            <br />
            <button class="button" v-on:click="startGame">Proceed to Setup</button>
        </section>
        <section class="playerArea" v-if="gameHasStarted">
            <section class="start-new text-centered">
                <a href="#" v-on:click="newGame()">New Game</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<a href="#" v-on:click="undo()">Undo</a>&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<a href="#" v-on:click="toggleShowBoardState">View Board State</a>
            </section>
            <section v-if="currentGameStep === 0">
                <h1>Game Setup</h1>

                <p>1) Setup your player board and the game board as normal.</p>
                <p>2) Setup the following merchant tiles along with their beer as normal. </p>
                <ul>
                    <li v-for="location in findAllMerchantsWithTiles()" :key="location.id">
                        {{ location.name }}
                        
                        <ul>
                            <li v-for="space in location.spaces" :key="space.id">
                                <p v-if="space.tile">{{ boardIndustryTileToStringWithResources(location.id, space.tile.id, false) }}</p>
                            </li>
                        </ul>
                    </li>
                </ul>
                <p style="font-style: italic;">NOTE: These merchant tiles have been chosen randomly. If you don't like the setup try starting a new game and you'll get a new random setup!</p>
                <p>3) Setup a deck for a normal {{ numberOfPlayers }}-player game. Place <em>half</em> of the cards on board, and leave the other half out of the game for now. You will use only half of the cards each era.</p>
                <p>4) Setup Eliza's player board (use Gray tiles). Do not place Level 1 industries on her player board and do not place the Level 2 manufactured goods either. These are all considered already developed.</p>
                <p v-if="numberOfPlayers == '3'">5) Setup Eleanor's player board (use Yellow tiles). Do not place Level 1 industries on her player board and do not place the Level 2 manufactured goods either. These are all considered already developed.</p>
                <p>When you are done with setup, click 'Next' to begin the game!</p>
            </section>
            <section v-if="currentGameStep === 1">
                <section v-if="humanPlayer.player_type === 0">
                    <section class="player-header">
                        <svg class="player-icon player-icon-blue" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 800"><g id="Layer_2" data-name="Layer 2"><g><path class="cls-1" d="M400,0C179.44,0,0,179.44,0,400S179.44,800,400,800,800,620.56,800,400,620.56,0,400,0Zm0,727.27a325.43,325.43,0,0,1-134.13-28.76l31-32.94L445.11,656l190.1-121.21L610.8,501.69l-152.53,52L339.48,558l-1.28-19.71,96.62-11,2.53-36.71L260.2,489.44,150.61,611.66A325.74,325.74,0,0,1,72.73,400C72.73,219.54,219.54,72.73,400,72.73S727.27,219.54,727.27,400,580.46,727.27,400,727.27Z"/><path class="cls-2" d="M460.9,354.16a37.48,37.48,0,0,1-37.44,37.44,37.92,37.92,0,0,1-6.25-.51c-5.94-1.5-10.12-3.19-17.37-7.67a100.89,100.89,0,0,0-20.18-9.59,127.71,127.71,0,0,0,8-58.28h63.78V275.07H376.72c-.46-1-.93-2-1.42-3-1.24-2.52-6.31-11.21-8.76-17-.2-.54-.4-1.09-.6-1.67a68.06,68.06,0,0,1-3.64-21,44.28,44.28,0,0,1,88.56,0H515a108.38,108.38,0,0,0-216.76,0,131.54,131.54,0,0,0,7.43,42.64H275v40.48h47.9a63.23,63.23,0,0,1-.77,28.15,62.59,62.59,0,0,1-42.52,44.68l18.75,61.3a126.33,126.33,0,0,0,20.19-8.16h0s4.16-2,5.48-2.79c8.56-5,18.19-7.65,28-6a38.8,38.8,0,0,1,16.16,6.61,94.51,94.51,0,0,0,13.56,7.43h0A101.54,101.54,0,0,0,525,354.16Z"/></g></g></svg>
                        <section class="player-name">
                            <h2 class="section-title" v-if="humanPlayer.currentTurnIndex === 0">Your First Action</h2>
                            <h2 class="section-title" v-if="humanPlayer.currentTurnIndex === 1">Your Second Action</h2>
                            <p class="section-detail">Round {{ currentRound }}</p>
                        </section>
                    </section>
                    <section v-if="!humanPlayer.actionStep">
                        <ul class="cards">
                            <li class="card card--clickable" v-on:click="setHumanAction('00')">
                                <p class="card__name">Build</p>
                            </li>
                            <li class="card card--clickable" v-on:click="setHumanAction('10')">
                                <p class="card__name">Network</p>
                            </li>
                            <li class="card card--clickable" v-on:click="setHumanAction('20')">
                                <p class="card__name">Sell</p>
                            </li>
                            <li class="card card--clickable" v-on:click="setHumanAction('30')">
                                <p class="card__name">Develop</p>
                            </li>
                            <li class="card card--clickable" v-on:click="setHumanAction('40')">
                                <p class="card__name">Scout or Loan</p>
                            </li>
                        </ul>
                    </section>

                    <section v-if="humanPlayer.actionStep === '00'">
                        <a href="#" v-on:click="prevSetHumanAction()">< Go Back</a>
                        <p class="action-header">What industry are you building?</p> 
                        <ul class="cards">
                            <li v-for="tile in findAllNextTilesFromPlayerBoard(0)" class="card card--clickable" v-on:click="setHumanBuildIndustryType(tile.industrytype, tile.id)">
                                <p class="card__name">{{ tileToString(tile) }}</p>
                            </li>
                        </ul>
                    </section>

                    <section v-if="humanPlayer.actionStep === '01'">
                        <a href="#" v-on:click="prevHumanBuildIndustryType">< Go Back</a>
                        <p class="action-header">Where are you building your {{ tileToString(humanPlayer.nextAction.actiondata.buildtile) }}?</p> 
                        <ul class="cards">
                            <li v-for="loc in validHumanBuildLocationsForIndustryType" :key="loc.id" class="card card--clickable" v-on:click="setHumanBuildLocationAndSpace(loc.locationid, loc.spaceid)">
                                <p class="card__name">{{ loc.name }} (Space {{ loc.spaceid }})</p>
                            </li>
                        </ul>
                        <p v-if="validHumanBuildLocationsForIndustryType.length === 0">This tile cannot be built currently.</p>
                    </section>

                    <section v-if="humanPlayer.actionStep === '03'">
                        <a href="#" v-on:click="prevBuildActionConfirm()">< Go Back</a>
                        <p class="action-header">Confirm Your Action<br /><span class="action-message">Click 'Next' to confirm.</span></p>
                        <ul>
                            <li class="action-desc" v-for="action in getHumanActionDescription()">
                                {{ action.actionDesc }}
                            </li>
                        </ul>
                    </section>

                    <section v-if="humanPlayer.actionStep === '10'">
                        <a href="#" v-on:click="prevSetHumanAction()">< Go Back</a>
                        <p class="action-header">Where are you networking from?</p> 
                        <ul class="cards">
                            <li class="card card--clickable" v-for="location in validHumanNetworkLocations()" :key="location.id" v-on:click="setNetworkLocationFrom(location.id)">
                                <p class="card__name">{{ location.name }}</p>
                            </li>
                        </ul>
                    </section>

                    <section v-if="humanPlayer.actionStep === '11'">
                        <a href="#" v-on:click="prevNetworkLocationFrom()">< Go Back</a>
                        <p class="action-header">Where are you networking to?</p> 
                        <ul class="cards">
                            <li class="card card--clickable" v-for="location in findAdjacentIndustryLocationsForHumanNetwork(humanPlayer.nextAction.actiondata.networkfromlocationid)" :key="location.id">
                                <p class="card__name">{{ location.name }}</p>
                            </li>
                        </ul>
                    </section>

                    <section v-if="humanPlayer.actionStep === '20'">
                        <a href="#" v-on:click="prevSetHumanAction()">< Go Back</a>
                        <p class="action-header">What industries are you selling?</p> 
                        <ul>
                            <li>
                                Industry Tile String
                            </li>
                        </ul>
                    </section>

                    <section v-if="humanPlayer.actionStep === '30'">
                        <a href="#" v-on:click="prevSetHumanAction()">< Go Back</a>
                        <p class="action-header">What is the first industry you are developing?<br /></p> 
                        <ul>
                            <li>
                                Industry Tile String
                            </li>
                        </ul>
                    </section>

                    <section v-if="humanPlayer.actionStep === '02' || humanPlayer.actionStep === '12' || humanPlayer.actionStep === '31'">
                        <a href="#" v-on:click="setPrevConsume()">< Go Back</a>
                        <p class="action-message"><span v-if="humanPlayer.nextAction.action === 0">Building your {{ tileToString(humanPlayer.nextAction.actiondata.buildtile) }} in {{ humanPlayer.nextAction.actiondata.buildlocationname }} costs &pound;{{ humanPlayer.nextAction.actiondata.buildtile.poundsCost }}.</span></p>
                        <section class="consume-section" v-if="humanPlayer.nextAction.actiondata.consumelocations.coal">
                            <p class="action-header">Your {{ humanActionStringMap[humanPlayer.nextAction.action] }} action consumes <span class="important">{{ humanPlayer.nextAction.actiondata.consumelocations.coal.coalNeeded }} Coal</span>.<br /><span class="small">Indicate below how much coal you are taking from each location.</span></p> 
                            <ul class="cards">
                                <li v-for="location in humanPlayer.nextAction.actiondata.consumelocations.coal.coalLocations" class="card">
                                    <p class="card__name">{{ location.name }} (Space {{ location.spaceid }})</p>
                                    <div class="card__area">
                                        <label v-for="resource in location.resourceArray">
                                            <input type="radio" v-bind:value="resource"
                                            v-bind:value="location.id" v-model="location.chosenCoal" /><span>{{ resource }}</span>
                                        </label>
                                    </div>
                                </li>
                            </ul>
                        </section>
                        <section class="consume-section" v-if="humanPlayer.nextAction.actiondata.consumelocations.iron">
                            <p class="action-header">Your {{ humanActionStringMap[humanPlayer.nextAction.action] }} action consumes <span class="important">{{ humanPlayer.nextAction.actiondata.consumelocations.iron.ironNeeded }} Iron</span>.<br /><span class="small">Indicate below how much iron you are taking from each location.</span></p>
                            <ul class="cards">
                                <li v-for="location in humanPlayer.nextAction.actiondata.consumelocations.iron.ironLocations" class="card">
                                    <p class="card__name">{{ location.name }} (Space {{ location.spaceid }})</p>
                                    <div class="card__area">
                                        <label v-for="resource in location.resourceArray">
                                            <input type="radio" v-bind:value="resource"
                                            v-bind:value="location.id"  v-model="location.chosenIron" /><span>{{ resource }}</span>
                                        </label>
                                    </div>
                                </li>
                            </ul>
                        </section>
                    </section>

                    <section v-if="humanPlayer.actionStep === '40'">
                        <a href="#" v-on:click="prevSetHumanAction()">< Go Back</a>
                        <p class="action-header">You do not need to enter anything into the app for Scout or Loan.<br /><span class="action-message">Click 'Next' when you have finished your Scout or Loan action.</span></p> 
                    </section>
                </section>

                <section v-if="currentPlayer === 1 || currentPlayer === 2">
                    Eliza Eleanor

                    <ul>
                        <li>
                            <label>
                                <input type="checkbox" />
                                AI next action
                            </label>
                        </li>
                    </ul>
                </section>
            </section>
            <section v-if="currentGameStep === 2">
                Rail Era Begins
                Rail Era Instructions
            </section>
            <section v-if="currentGameStep === 3">
                Final Score
                You
                Eliza
                Eleanor
            </section>
            <section class="button-container" v-if="showNextButton()">
                <button class="button" v-if="currentGameStep === 0" v-on:click="next()">Start Game</button>
                <button class="button" v-if="currentGameStep === 1" v-on:click="next()">Next >></button>
            </section>
            <section class="boardstate" v-if="showBoardState">
                <a href="#" class="boardstate_close" v-on:click="toggleShowBoardState">[ Close Board State ]</a>
                <p class="boardstate__instructions">"X :" - a space with an industry tile</p>
                <p class="boardstate__instructions">"-->" - a link tile</p>
                <p class="boardstate__marketspaces">
                    Empty Coal Spaces in Market: {{ totalEmptyMarketCoalSpaces }}<br />
                    Empty Iron Spaces in Market: {{ totalEmptyMarketIronSpaces }}
                </p>
                <ul class="boardstate__locations">
                    <li class="boardstate__location" v-for="location in board.locations">
                        <p class="boardstate__locationname">{{ location.name }}</p>
                        <ul class="boardstate__industrytiles">
                            <li v-for="space in findSpacesWithTiles(location.spaces)">
                                <p v-if="space.tile"><span v-if="!space.tile.isMerchantTile">{{ space.id + 1 }} : {{ colorString(space.tile.color) }} | </span>{{ boardIndustryTileToStringWithResources(location.id, space.tile.id, true) }}</p>
                            </li>
                        </ul>
                        <ul class="boardstate__adjacentlocations">
                            <li v-for="adjacentLocation in reportAdjacentLocations(location.id)">
                                <p class="boardstate__adjacentlocation">--> {{ adjacentLocation.name }} ({{ adjacentLocation.colorString }})</p>
                            </li>
                        </ul>
                    </li>
                </ul>
            </section>
        </section>
    </main>
</body>
<script src="data.js"></script>
<script src="app.js"></script>
</html>