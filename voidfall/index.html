<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <link rel="shortcut icon" href="images/favicon.ico">
    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Exo+2&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Exo 2', sans-serif;
            font-size: 18px;
            box-sizing: border-box;
            color: #fff;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            background-color: #000;
            padding-bottom: 150px;
        }

        #vf {
            padding: 0 1rem;
            display: flex;
            flex: 1;
            min-height: 100vh;
            flex-direction: column;
            align-items: center;
        }

        section {
            width: 100%;
        }

        h1 {
            font-size: 1.2rem;
        }

        small {
            font-size: 0.8rem;
        }

        button {
            background-color: darkred;
            color: white;
            cursor: pointer;
            border: none;
            padding: 0.5rem;
        }

        button.button-secondary {
            background-color: #ccc;
            color: #000;
            font-size: 0.9rem;
        }

        .random-houses {
            display: flex;
            text-align: right;
            justify-content: center;
        }

        input[type='text'], input[type='number'], select {
            color: #000;
            padding: 0.5rem;
        }

        select {
            padding: 0.5rem;
            max-width: 150px;
        }

        select.wide-select {
            max-width: 200px;
        }

        option {
            color: #000;
        }

        h2 {
            margin-block-end: 0.25rem;
            margin-bottom: 0.25rem;
        }

        p {
            margin-block-start: 0;
            margin-top: 0;
        }

        .app-start-header {
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
            padding-block-start: 1rem;
        }

        .app-title {
            margin: 0;
        }

        .app-version {
            margin: 0;
            font-size: 0.8rem;
        }

        .app-explanation {
            margin-block-start: 0.1rem;
            margin-block-end: 1rem;
            display: block;
        }

        .player-form {
            display: flex;
            flex-wrap: wrap;
            padding: 1rem;
            gap: 1rem;
            border: solid 1px #be0000;   
            margin-block-end: 1rem;
        }

        .player-form p {
            margin-block-end: 0;
        }

        .player-form h2 {
            width: 100%;
            margin: 0;
        }

        .player-form label {
            margin-inline-end: .25rem;
            font-size: 0.9rem;
        }

        .player-form select, .player-form input, .player-form h2 {
            font-size: 0.9rem;
        }

        .menu-links {
            margin-block-start: 1rem;
            margin-top: 1rem;
            text-align: center;
        }

        .menu-links a {
            text-decoration: none;
            color: #be0000;
            font-size: 1.125rem;
        }

        .menu-links a:hover {
            text-decoration: underline;
        }

        .menu-link.selected {
            font-weight: bold;
        }

        .separation-header {
            background-color: #ddd;
            padding: 0.5rem;
            margin: 0;
            color: #000;
            margin: 0 -1rem;
        }

        .technologies-header {
            display: flex;
            align-items: center;
        }

        .technologies-header a, .technologies-header a:visited {
            color: lightblue;
            display: inline;
            font-size: 0.8rem;
            margin-inline-start: 1rem;
        }

        .tech-nav {
            text-align: center;
            margin: 1rem;
        }

        .tech-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .tech {
            border: solid 1px darkred;
            padding: 0.5rem;
            margin: 0;
            cursor: pointer;
        }

        .tech {
            font-size: 0.9rem;
        }

        .tech--used {
            border: #fff;
            background-color: darkred;
            cursor: auto;
            font-size: 1rem;
        }

        .tech--used a {
            font-size: 0.9rem;
        }

        .tech-level {
            font-weight: bold;
            color: #CCCC00;
        }

        .tableau-explanation {
            margin-block-start: 0.5rem;
            margin-block-end: 1rem;
            display: block;
        }

        .fallen-houses {
            padding-block-end: 1rem;
        }

        .tableau-tech {
            padding: 0.5rem;
            border: solid 1px darkred;
        }

        .tableau-tech header {
            font-size: 0.9rem;
        }

        .tableau-tech footer dl {
            margin: 0;
        }

        .tableau-tech footer dl div {
            display: block;
            width: 100%;
        }

        .tableau-tech footer dl dd, .tableau-tech footer dl dt {
            font-size: 0.75rem;
            display: inline;
        }

        .tableau-tech footer dl dt {
            font-weight: bold;
        }

        .tableau-tech footer dl dd {
            margin: 0 0.25rem;
        }

        .select-calc-player {
            margin-block-end: 1rem;
        }

        .increment {
            display: flex;
            flex-shrink: 0;
            margin-left: 0.5rem;
            justify-content: space-between;
            align-items: baseline;
            width: 100%;
            max-width: 400px;
        }

        .increment a, .threat a {
            padding: 0.625rem;
            background-color: darkred;
            text-decoration: none;
            border-radius: 25%;
            display: inline-flex;
            font-weight: bold;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .increment-buttons {
            display: inline-flex;
            justify-content: space-evenly;
            align-items: baseline;
            gap: 0.5rem;
        }

        .calc-buttons {
            display: flex;
            justify-content: space-between;
        }

        .calc-button {
            margin-top: 1rem;
        }

        span.power {
            min-width: 11px;
            text-align: center;
        }

        .winner {
            
        }
        
        .winner h2 {
            margin-block-end: 1rem;
            margin-bottom: 1rem;
        }

        .winner-final-fleet {
            display: flex;
            gap: 1rem;
            padding-inline-start: 1rem;
            padding-left: 1rem;
            background-color: #ddd;
            padding: 0.5rem;
            margin: 0;
        }

        .winner-final-fleet li {
            list-style: none;
            white-space: nowrap;
            font-size: 0.925rem;
            color: #000;
        }

        .combat-version {
            padding: 0.25rem;
            padding-inline-start: 0.5rem;
            padding-left: 0.5rem;
            background-color: #444;
            color: #fff;
            margin: 0;
            font-size: 0.9rem;
            white-space: nowrap;
        }

        .combat-version-arrow {
            float: right;
        }

        .winner-steps {
            padding-inline-start: 1rem;
            padding-left: 1rem;
            margin-block-start: 0.25rem;
        }

        .winner-steps li {
            list-style: none;
            font-size: 0.875rem;
            padding-bottom: 0.5rem;
        }

        .notes {
            padding-block-start: 1rem;
            padding-top: 1rem;
            border-top: solid 1px #fff;
        }

        .notes ul li {
            margin-block-end: 1rem;
            margin-bottom: 1rem;
        }

        .expand {
            width: 100%;
            text-align: right;
        }

        .expand a {
            font-size: 0.9rem;
        }

        .margin {
            margin: 1rem 0;
        }

        .margin-md {
            margin: 2rem 0;
        }

        .limit-container {
            max-width: 800px;
        }

        .games-footer {
            border-top: solid 1px #fff;
        }

        .games-footer p {
            font-size: 0.9rem;
            text-align: center;
            margin-block-start: 0.25rem;
            margin-block-end: 0.25rem;
        }

        .games-footer a, .games-footer a:visited {
            color: #be0000;
        }
    </style>
    <title>Voidfall Helper: House randomizer, tech tableau generator, and combat calculator</title>
</head>
<body>
    <main id="vf" class="limit-container">
        <section v-if="this.pageState === 0">
            <header class="app-start-header">
                <h1 class="app-title">Voidfall Helper</h1>
                <p class="app-version">(v{{version}})</p>
            </header>
            <small class="app-explanation">House randomizer, tech tableau generator, and combat calculator.</small>
            <p>
                <label for="numberOfPlayers"># of players: </label>
                <select v-model="numberOfPlayers" id="numberOfPlayers" @change="numberOfPlayersChanged(numberOfPlayersIndex)">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                </select>
            </p>
            <p>
                <label for="scenarioType">Type of game: </label>
                <select v-model="scenarioType" id="scenarioType" @change="scenarioTypeChanged(scenarioTypeIndex)">
                    <option value="0" v-if="numberOfPlayers == 1">Solo</option>
                    <option value="1" v-if="numberOfPlayers > 1">Cooperative</option>
                    <option value="2" v-if="numberOfPlayers > 1">Competitive</option>
                </select>
            </p>
            <p v-if="scenariosByTypeAndPlayers && scenariosByTypeAndPlayers.length > 0">
                <label for="chosenScenario">Scenario (optional): </label>
                <select v-model="chosenScenario" id="chosenScenario" @change="chosenScenarioChanged(chosenScenarioIndex)">
                    <option v-if="chosenScenario && chosenScenario != 'None'" value="None">None</option>
                    <option v-for="scenario in scenariosByTypeAndPlayers" :value="scenario">
                        {{ scenario.name }}
                    </option>
                </select>
            </p>
            <p v-if="chosenScenario && chosenScenario.id != 'T' && (scenarioType == 0 || scenarioType == 1)" class="random-houses">
                <button class="button-secondary" v-on:click="setRandomHouses">Set random house<template v-if="scenarioType == 1">s</template></button>
            </p>
            <p v-if="chosenScenario && (scenarioType == 2 || chosenScenario.id == 'T')" class="random-houses">
                <button class="button-secondary" v-on:click="setRandomRecommendedHouses">Set random recommended houses</button>
            </p>
            <section class="margin">
                <article class="player-form">
                    <h2>Player 1</h2>
                    <p>
                        <label for="player1">Name</label>
                        <input type="text" v-model="players[0].name" id="player1" />
                    </p>
                    <p>
                        <label for="player1">House</label>
                        <select v-model="players[0].houseWithOrigin" class="wide-select">
                            <option v-for="houseWithOrigin in housesWithOrigins" :value="houseWithOrigin">
                                {{ houseWithOrigin.name }}
                            </option>
                        </select>
                    </p>
                </article>
                <article class="player-form" v-if="numberOfPlayers > 1">
                    <h2>Player 2</h2>
                    <p>
                        <label for="player2">Name</label>
                        <input type="text" v-model="players[1].name" id="player2" />
                    </p>
                    <p>
                        <label for="player2">House</label>
                        <select v-model="players[1].houseWithOrigin">
                            <option v-for="houseWithOrigin in housesWithOrigins" :value="houseWithOrigin">
                                {{ houseWithOrigin.name }}
                            </option>
                        </select>
                    </p>
                </article>
                <article class="player-form" v-if="numberOfPlayers > 2">
                    <h2>Player 3</h2>
                    <p>
                        <label for="player3">Name</label>
                        <input type="text" v-model="players[2].name" id="player3" />
                    </p>
                    <p>
                        <label for="player3">House</label>
                        <select v-model="players[2].houseWithOrigin">
                            <option v-for="houseWithOrigin in housesWithOrigins" :value="houseWithOrigin">
                                {{ houseWithOrigin.name }}
                            </option>
                        </select>
                    </p>
                </article>
                <article class="player-form" v-if="numberOfPlayers > 3">
                    <h2>Player 4</h2>
                    <p>
                        <label for="player4">Name</label>
                        <input type="text" v-model="players[3].name" id="player4" />
                    </p>
                    <p>
                        <label for="player4">House</label>
                        <select v-model="players[3].houseWithOrigin">
                            <option v-for="houseWithOrigin in housesWithOrigins" :value="houseWithOrigin">
                                {{ houseWithOrigin.name }}
                            </option>
                        </select>
                    </p>
                </article>
                <p>
                    <button v-on:click="start">Start Game</button>
                </p>
            </section>
            <section class="notes">
                <h2>Notes</h2>
                <ul>
                    <li>If you choose a scenario, the app will generate the fallen houses and tech tableau for you. You'll find it on the bottom of the 'Tech' page after starting a game.</li>
                    <li>Keep track of players' tech during the game on the Tech page. Tech powers are then included in the calculations.</li>
                    <li>If you are using Carriers, and they deploy Corvettes, simply increase the Corvette count in the calculator before running the calculation. The app does not automatically deploy Corvettes from Carriers.</li>
                    <li>The app shows all possible outcomes, except for variations where you obviously should recall Corvettes but recall something else instead.</li>
                    <li>Once you have calculated once, any changes to fleet power will auto-recalculate unless you change the invader/defender.</li>
                </ul>
            </section>
            <footer class="games-footer">
                <p>
                    <a href="https://gameswithtony.com">gameswithtony.com</a>
                </p>
                <p>
                    Not affiliated with Mindclash Games
                </p>
            </footer>
        </section>
        <nav class="menu-links" v-if="this.pageState ===  1 || this.pageState === 2">
            <a href="#" v-on:click="newgame($event)" class="menu-link">New Game</a>&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" class="menu-link"  v-on:click="showTech($event)" :class="{  'selected': pageState === 1 }">Tech</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<a href="#" class="menu-link" v-on:click="showCalculator($event)" :class="{  'selected': pageState === 2 }">Calc</a>
        </nav>
        <section v-if="this.pageState === 1">
            <header class="technologies-header">
                <h1>Technologies</h1>
                <template v-if="chosenScenario"><a href="#tableau">(View Tableau)</a></template>
            </header>
            <h2 class="separation-header">Player Combat Tech</h2>
            <section v-for="(player, playerIndex) in players" :key="player.id">
                <h2>{{ player.name }}<template v-if="player.houseWithOrigin">&nbsp;({{ player.houseWithOrigin.house.name }})</template></h2>
                <section class="tech-list" v-if="player.techs.length > 0">
                    <p class="tech tech--used" v-for="(tech, techIndex) in player.techs" :key="tech.id">{{ tech.name }}<br /><a href="#" :class="{ 'tech-level': !tech.isImproved }"  v-on:click="demoteTech($event, playerIndex, techIndex)">Basic</a> | <a href="#" :class="{ 'tech-level': tech.isImproved }" v-on:click="improveTech($event, playerIndex, techIndex)">Improved</a>&nbsp;&nbsp;&nbsp;/ <a href="#" v-on:click="removeTech($event, playerIndex, techIndex)">X</a></p>
                </section>
                <section class="tech-list">
                    <p class="tech" v-for="(tech, techIndex) in player.unusedTechs" :key="tech.id" v-on:click="addTech(playerIndex, tech, techIndex)">{{ tech.name }}</p>
                </section>
            </section>
            <section v-if="chosenScenario">
                <a name="tableau"></a><h2 class="separation-header">Tableau</h2>
                <small class="tableau-explanation">An initial tech tableau generated for '{{ chosenScenario.name }}' and the chosen player houses.</small>
                <section class="fallen-houses">
                    <template v-if="chosenScenario.id != 'T'"">Fallen Houses:</template><template v-if="chosenScenario.id == 'T'"">Tutorial Tech Houses:</template> <span v-for="fallenHouse in fourFallenHouses">{{ fallenHouse.name }}&nbsp;&nbsp;</span>
                </section>
                <section class="tech-list">
                    <article v-for="tableauTech in techTableau" class="tableau-tech">
                        <header>
                            {{ tableauTech.name }}
                        </header>
                        <footer>
                            <dl>
                                <div>
                                    <dt>House:</dt>
                                    <dd>{{ tableauTech.fallenHouseName }}</dd>
                                </div>
                                <div>
                                    <dt>Card w/ VP?:</dt>
                                    <dd>{{ tableauTech.hasVPCard ? 'Yes' : 'No' }}</dd>
                                </div>
                                <div>
                                    <dt>Card w/out VP?:</dt>
                                    <dd>{{ tableauTech.hasNonVPCard ? 'Yes' : 'No' }}</dd>
                                </div>
                            </dl>
                        </footer>
                    </article>
                </section>
            </section>
        </section>
        <section v-if="this.pageState === 2">
            <h1>Calculator</h1>
            <textarea id="copytextarea" style="position: absolute; left: -99999px;" contenteditable="true"></textarea>
            <section v-for="(calcPlayer, calcPlayerIndex) in calculationPlayers" class="select-calc-player">
                <label>
                    <template v-if="calcPlayer.isInvader">Invader: </template><template v-if="!calcPlayer.isInvader">Defender: </template>
                    <select v-model="calcPlayer.playerid" @change="calcPlayerChanged(calcPlayerIndex)">
                        <option v-for="(player, index) in players" :value="player.id">{{ player.name }}</option>
                        <option value="1000">Voidborn</option>
                    </select>
                </label>
                <section v-if="calcPlayer.playerid > 0">
                    <template v-for="(playerFleet, playerFleetIndex) in calcPlayer.fleets">
                        <section class="increment" v-if="showFleet(calcPlayerIndex, playerFleetIndex)">
                            <p class="increment-name">{{ playerFleet.name }}</p>
                            <p class="increment-buttons">
                                <a href="#" v-on:click="updatePlayerFleet($event, calcPlayerIndex, playerFleetIndex, -1)">- 1</a>
                                <span class="power">{{ playerFleet.power }}</span>
                                <a href="#" v-on:click="updatePlayerFleet($event, calcPlayerIndex, playerFleetIndex, 1)">+ 1</a>
                            </p>
                        </section>
                    </template>
                    <template v-if="calcPlayer.isInvader && playerHasAutonomousDrones(calcPlayer.playerid)">
                        <section class="increment">
                            <p class="increment-name"><label :for="'AutonomousDrones_' + calcPlayer.id">Return Trade Token (Drones)?</label></p>
                            <p class="increment-buttons">
                                <input type="checkbox" v-model="calcPlayer.spendTradeTokenToUseAutonomousDrones" :id="'AutonomousDrones_' + calcPlayer.id" @change="updateCheckbox()" />
                            </p>
                        </section>
                    </template>
                    <section class="increment" v-if="calcPlayer.isInvader && calcPlayer.playerid != 1000 && calcPlayer.playerid > 0 && isNervo(calcPlayer.playerid)">
                        <p class="increment-name"><label :for="'Bombard_' + calcPlayer.id">Use Bombard (Nervo)?</label></p>
                        <p class="increment-buttons">
                            <input type="checkbox" v-model="calcPlayer.useBombard" :id="'Bombard_' + calcPlayer.id" @change="updateCheckbox()" />
                        </p>
                    </section>
                    <section class="increment" v-if="calcPlayer.useBombard && calcPlayer.isInvader">
                        <p class="increment-name">&nbsp;&nbsp;Bombard Absorption</p>
                        <p class="increment-buttons">
                            <a href="#" v-on:click="updateBombardAbsorption($event, calcPlayerIndex, -1)">- 1</a>
                            <span class="power">{{ calcPlayer.bombardAbsorption }}</span>
                            <a href="#" v-on:click="updateBombardAbsorption($event, calcPlayerIndex, 1)">+ 1</a>
                        </p>
                    </section>
                    <section class="increment" v-if="(calcPlayer.isInvader && playerHasBasicDeepSpaceMissiles(calcPlayer.playerid))">
                        <p class="increment-name"><label :for="'DeepSpaceMissiles_' + calcPlayer.id">Spend 1 Energy (Deep Space Missiles)?</label></p>
                        <p class="increment-buttons">
                            <input type="checkbox" v-model="calcPlayer.spendEnergyToUseBasicDeepSpaceMissiles" :id="'DeepSpaceMissiles_' + calcPlayer.id" @change="updateCheckbox()" />
                        </p>
                    </section>
                    <section class="increment" v-if="(calcPlayer.isInvader && calcPlayer.isVoidborn() && (scenarioType == 0 || scenarioType == 1))">
                        <p class="increment-name"><label :for="'plusFiveInitiative_' + calcPlayer.id">+5 Initiative (War card)</label></p>
                        <p class="increment-buttons">
                            <input type="checkbox" v-model="calcPlayer.plusFiveVoidbornInitiative" :id="'plusFiveInitiative_' + calcPlayer.id" @change="updateCheckbox()" />
                        </p>
                    </section>
                    <section class="increment" v-if="(calcPlayer.isInvader && calcPlayer.isVoidborn() && (scenarioType == 0 || scenarioType == 1))">
                        <p class="increment-name"><label :for="'plusOneVoidbornApproachAbsorption_' + calcPlayer.id">+1 Approach absorption (War card)</label></p>
                        <p class="increment-buttons">
                            <input type="checkbox" v-model="calcPlayer.plusOneVoidbornApproachAbsorption" :id="'plusOneVoidbornApproachAbsorption_' + calcPlayer.id" @change="updateCheckbox()" />
                        </p>
                    </section>
                    <section class="increment" v-if="(calcPlayer.isInvader && calcPlayer.isVoidborn() && (scenarioType == 0 || scenarioType == 1))">
                        <p class="increment-name"><label :for="'plusOneVoidbornSalvoAbsorption_' + calcPlayer.id">+1 Salvo absorption (War card - Easy)</label></p>
                        <p class="increment-buttons">
                            <input type="checkbox" v-model="calcPlayer.plusOneVoidbornSalvoAbsorption" :id="'plusOneVoidbornSalvoAbsorption_' + calcPlayer.id" @change="updateCheckbox()" />
                        </p>
                    </section>
                    <section class="increment" v-if="(calcPlayer.isInvader && calcPlayer.isVoidborn() && (scenarioType == 0 || scenarioType == 1))">
                        <p class="increment-name"><label :for="'plusTwoVoidbornSalvoAbsorption_' + calcPlayer.id">+2 Salvo absorption (War card - Norm/Hard)</label></p>
                        <p class="increment-buttons">
                            <input type="checkbox" v-model="calcPlayer.plusTwoVoidbornSalvoAbsorption" :id="'plusTwoVoidbornSalvoAbsorption_' + calcPlayer.id" @change="updateCheckbox()" />
                        </p>
                    </section>
                    <section class="increment" v-if="(!calcPlayer.isInvader && playerHasImprovedDeepSpaceMissiles(calcPlayer.playerid)) || ((calcPlayer.isInvader && playerHasBasicDeepSpaceMissiles(calcPlayer.playerid) && calcPlayer.spendEnergyToUseBasicDeepSpaceMissiles) || (calcPlayer.isInvader && playerHasImprovedDeepSpaceMissiles(calcPlayer.playerid)))">
                        <p class="increment-name">Adjacent Sectors w/ Shipyards</p>
                        <p class="increment-buttons">
                            <a href="#" v-on:click="updateAdjacentSectorsWithShipyards($event, calcPlayerIndex, -1)">- 1</a>
                            <span class="power">{{ calcPlayer.adjacentSectorsWithShipyards }}</span>
                            <a href="#" v-on:click="updateAdjacentSectorsWithShipyards($event, calcPlayerIndex, 1)">+ 1</a>
                        </p>
                    </section>
                    <section class="increment" v-if="(!calcPlayer.isInvader && playerHasImprovedDeepSpaceMissiles(calcPlayer.playerid)) || ((calcPlayer.isInvader && playerHasBasicDeepSpaceMissiles(calcPlayer.playerid) && calcPlayer.spendEnergyToUseBasicDeepSpaceMissiles) || (calcPlayer.isInvader && playerHasImprovedDeepSpaceMissiles(calcPlayer.playerid)))">
                        <p class="increment-name">Adjacent Sectors w/ Starbases</p>
                        <p class="increment-buttons">
                            <a href="#" v-on:click="updateAdjacentSectorsWithStarbases($event, calcPlayerIndex, -1)">- 1</a>
                            <span class="power">{{ calcPlayer.adjacentSectorsWithStarbases }}</span>
                            <a href="#" v-on:click="updateAdjacentSectorsWithStarbases($event, calcPlayerIndex, 1)">+ 1</a>
                        </p>
                    </section>
                </section>
            </section>
            <p class="calc-buttons">
                <button v-on:click="calculate" class="calc-button">&nbsp;&nbsp;Calculate Outcomes&nbsp;&nbsp;</button>
                <button v-on:click="swap" class="calc-button" aria-label="Swap" title="Swap">&rlarr;</button>
            </p>
            <section v-if="showResults">
                <p class="expand">
                    <a href="#" v-if="!expandAll" v-on:click="updateExpandAll($event, true)">Expand</a><a href="#"  v-if="expandAll" v-on:click="updateExpandAll($event, false)">Collapse</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="#" v-on:click="shareCalc($event)">Share</a>
                </p>
                <section v-if="results.invaderWins" class="winner">
                    <h2>Invader ({{ results.invaderName }}) Wins</h2>
                    <article v-if="expandAll" v-for="(win, index) in results.invaderWins">
                        <em>Final Fleet (v{{index+1}})</em>
                        <ul class="winner-final-fleet">
                            <template v-for="fleet in win.winnerFleet">
                                <li v-if="fleet.power > 0 && fleet.fleetType < 6">{{ getFleetDesc(fleet.fleetType) }}: {{ fleet.power }}</li>
                            </template>
                        </ul>
                        <template v-for="combat in win.combats">
                            <p class="combat-version" v-on:click="expandCollapseCombat($event, combat)">Combat v{{combat.combatVersion}}<span class="combat-version-arrow"><template v-if="!combat.showCombat">&#9660;</template><template v-if="combat.showCombat">&#9650;</template></span></p>
                            <ul class="winner-steps">
                                <template v-for="step in combat.steps" v-if="combat.showCombat">
                                    <li><template v-if="step.stepType === 0">Approach</template><template v-if="step.stepType === 1">Salvo {{ step.salvoNumber }}</template>: {{ step.desc }}<template v-if="step.stepType === 1"> ({{ step.details.invaderInitiative }}/{{ step.details.defenderInitiative }})</template>: {{ step.details.desc }}</li>
                                </template>
                            </ul>
                        </template>
                    </article>
                </section>
                <section v-if="results.defenderWins" class="winner">
                    <h2>Defender ({{ results.defenderName }}) Wins</h2>
                    <article v-if="expandAll" v-for="(win, index) in results.defenderWins">
                        <em>Final Fleet (v{{index+1}})</em>
                        <ul class="winner-final-fleet">
                            <template v-for="fleet in win.winnerFleet">
                                <li v-if="fleet.power > 0 && fleet.fleetType < 6">{{ getFleetDesc(fleet.fleetType) }}: {{ fleet.power }}</li>
                            </template>
                        </ul>
                        <template v-for="combat in win.combats">
                            <p class="combat-version" v-on:click="expandCollapseCombat($event, combat)">Combat v{{combat.combatVersion}}<span class="combat-version-arrow"><template v-if="!combat.showCombat">&#9660;</template><template v-if="combat.showCombat">&#9650;</template></span></p>
                            <ul class="winner-steps">
                                <template v-for="step in combat.steps" v-if="combat.showCombat">
                                    <li><template v-if="step.stepType === 0">Approach</template><template v-if="step.stepType === 1">Salvo {{ step.salvoNumber }}</template>: {{ step.desc }}<template v-if="step.stepType === 1"> ({{ step.details.invaderInitiative }}/{{ step.details.defenderInitiative }})</template>: {{ step.details.desc }}</li>
                                </template>
                            </ul>
                        </template>
                    </article>
                </section>
                <section v-if="results.ties">
                    <h2>Tie</h2>
                    <article v-if="expandAll" v-for="win in results.ties" class="winner">
                        <template v-for="combat in win.combats">
                            <p class="combat-version" v-on:click="expandCollapseCombat($event, combat)">Combat v{{combat.combatVersion}}<span class="combat-version-arrow"><template v-if="!combat.showCombat">&#9660;</template><template v-if="combat.showCombat">&#9650;</template></span></p>
                            <ul class="winner-steps">
                                    <template v-for="step in combat.steps" v-if="combat.showCombat">
                                        <li><template v-if="step.stepType === 0">Approach</template><template v-if="step.stepType === 1">Salvo {{ step.salvoNumber }}</template>: {{ step.desc }}<template v-if="step.stepType === 1"> ({{ step.details.invaderInitiative }}/{{ step.details.defenderInitiative }})</template>: {{ step.details.desc }}</li>
                                    </template>
                            </ul>
                        </template>
                    </article>
                </section>
            </section>
        </section>
    </main>
    <script src="app.js"></script>
</body>
</html>